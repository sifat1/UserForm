
@{
    ViewData["Title"] = "Edit Form";
    Layout = "_Layout";
}

<form method="post" asp-action="EditForm" asp-controller="Forms">
    <input type="hidden" name="FormId" value="@Model.FormId" />

    <div class="mb-3">
        <label for="FormTitle" class="form-label">Form Title</label>
        <input type="text" class="form-control" id="FormTitle" name="FormTitle" value="@Model.FormTitle" required />
    </div>

    <div id="questions-container">
        @for (int i = 0; i < Model.Questions.Count; i++)
        {
            var q = Model.Questions[i];
            <div class="question-block mb-3 border p-3 rounded" data-index="@i">
                <input type="hidden" name="Questions[@i].Id" value="@q.Id" />
                <div class="form-check mb-2">
                    <input type="checkbox" class="form-check-input delete-checkbox" />
                    <label class="form-check-label">Delete this question</label>
                </div>

                <label class="form-label">Question</label>
                <input type="text" name="Questions[@i].QuestionText" class="form-control mb-2" value="@q.QuestionText" required />

                <input type="hidden" name="Questions[@i].QuestionType" value="@q.QuestionType" />

                @if (q.QuestionType == "Options")
                {
                    <label class="form-label mt-2">Options</label>
                    @for (int j = 0; j < q.Options.Count; j++)
                    {
                        <div class="input-group mb-1">
                            <div class="input-group-text">
                                <input type="radio" name="Questions[@i].CorrectOptionIndex" value="@j" @(q.CorrectOptionIndex == j ? "checked" : "") />
                            </div>
                            <input type="text" class="form-control" name="Questions[@i].Options[@j]" value="@q.Options[j]" required />
                        </div>
                    }
                }
                else if (q.QuestionType == "Text")
                {
                    <em class="text-muted">[Text answer type]</em>
                }
            </div>
        }
    </div>

    <button type="submit" class="btn btn-primary mt-3">Save Changes</button>
</form>
